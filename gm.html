<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ER Transfer Message</title>

  <!-- Tailwind & DaisyUI -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Custom Style -->
  <link rel="stylesheet" href="styles/styles.css" />
</head>

<body class="bg-[#07102F] text-white pt-20">
  <!-- Top Bar -->
  <div class="fixed top-0 left-0 w-full bg-[#0059F7] p-4 shadow-md z-50">
    <h1 class="text-xl sm:text-2xl font-bold text-center">ER Transfer WhatsApp Message</h1>
  </div>

  <!-- Main Content -->
  <div class="p-6 max-w-2xl mx-auto space-y-4 mt-10">
    <div class="bg-[#151F42] p-6 rounded-lg shadow-md space-y-4">
      <h2 class="text-xl font-bold text-blue-300">Patient Transfer Form</h2>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <input type="text" id="patientName" placeholder="Patient Name" class="input input-bordered bg-[#0f172a] text-white">
        <input type="text" id="mrn" placeholder="MRN" class="input input-bordered bg-[#0f172a] text-white">
        <input type="datetime-local" id="admissionDateTime" class="input input-bordered bg-[#0f172a] text-white">
        <select id="payer" class="select select-bordered bg-[#0f172a] text-white">
          <option value="">Select Payer</option>
          <option>MOH</option>
          <option>TCS</option>
          <option>CASH</option>
          <option>Other</option>
        </select>
        <input type="text" id="room" placeholder="Room / Bed No." class="input input-bordered bg-[#0f172a] text-white">
        <input type="text" id="mrp" placeholder="MRP / Doctor Name" class="input input-bordered bg-[#0f172a] text-white">
        <input type="text" id="transferredTo" placeholder="Transferred To (Hospital)" class="input input-bordered bg-[#0f172a] text-white">
        <input type="text" id="diagnosis" placeholder="Principal Diagnosis" class="input input-bordered bg-[#0f172a] text-white">
      </div>

      <button onclick="generateWhatsApp()" class="btn bg-green-600 hover:bg-green-700 w-full text-white mt-4">
        <i class="fab fa-whatsapp mr-2"></i> Generate WhatsApp Message
      </button>

      <div id="result" class="whitespace-pre-line p-4 bg-[#1e293b] rounded hidden text-sm font-mono border border-blue-500"></div>

      <a id="whatsappLink" href="#" target="_blank" class="btn bg-green-500 w-full mt-2 hidden">
        <i class="fab fa-whatsapp mr-2"></i> Send via WhatsApp
      </a>
    </div>
  </div>

  <!-- JS Logic -->
  <script>
    function generateWhatsApp() {
      const name = document.getElementById('patientName').value;
      const mrn = document.getElementById('mrn').value;
      const admission = document.getElementById('admissionDateTime').value.replace('T', ' @ ');
      const payer = document.getElementById('payer').value;
      const room = document.getElementById('room').value;
      const mrp = document.getElementById('mrp').value;
      const to = document.getElementById('transferredTo').value;
      const diagnosis = document.getElementById('diagnosis').value;

      const msg = `**Transfer notification for ER Patient**\n\n1. Patient Name:- ${name}\n2. MRN:- ${mrn}\n3.⁠ Date &time of admission:- ${admission}\n4. Contract/ payer:- ${payer}\n5. Room/ Bed :- ${room}\n6. MRP :- ${mrp}\n7. Transferred to :- ${to}\n8. Principal Diagnosis :- ${diagnosis}`;

      const encodedMsg = encodeURIComponent(msg);
      const whatsappNumber = '9665XXXXXXXX'; // ← Replace with actual GM number
      const link = `https://wa.me/${whatsappNumber}?text=${encodedMsg}`;

      document.getElementById('result').innerText = msg;
      document.getElementById('result').classList.remove('hidden');

      const btn = document.getElementById('whatsappLink');
      btn.href = link;
      btn.classList.remove('hidden');
    }
  </script>
</body>
</html>
